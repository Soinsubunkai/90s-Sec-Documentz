/*
 * Windowsで共有は本当に共有だ
 *
 */

ファイル共有は非常に便利です、家庭や会社で LANを組んでいる方も多いかと思いますが
あまりに便利にしすぎてしまうと、大きな落とし穴があるものです。

■システム攻撃その１３

Windows でファイルの共有というのをしているマシンが、ダイヤルアップなどでインター
ネットに接続されている場合、あることをすることによって、その人の共有しているファ
イルが読んだり書けたりできます。通常のWindows95ではLANの中でしか出来ません。

アプリケーションによっては設定ファイルをコピーして実行するだけで、IDパスワードを
教えてくれるアプリもあります。そういうアプリの設定ファイルをダウンロードするとあ
なたの本名アカウント、パスワード、友人のメールアドレスなどいろいろ教えてくれます。

もし、侵入に成功したWindowsがフルアクセスであった場合、windows\system\systray.ex
eや、windows\system\internat.exeファイルにウイルスを感染させれば確実に、被害を与
えることが可能です。事前にどのウイルススキャンのいつの定義ファイルを使っているか
を、確認してそれに反応しないウイルスを入れればいいのですから。この２つのファイル
は Windowsが起動するとほぼ必ず起動されるので、効果覿面です。ほかにはキーストロー
クを記録するトロイの木馬なども忍び込ませることも可能です。

ネットウォチャーで監視されている可能性があるときは、ユーザー名、マシン名、ワーク
グループ名を偽造して入ることもできます。
 
08/09追加

これが出来るソフトのプラットホームは現在公開されている、これが出来るソフトは、Wi
ndows95で Winsock2.2にあるパッチを当てた物と、私の作成した Linux用の物が出回って
います。 

■システム防御その１３

ファイル共有というのは、とっても便利なのですがそれをそのままインターネットに接続
すると、非常に便利になります。なにしろ世界中のインターネットユーザに公開している
ことになるのですから。

常識なのですが、最低でもパスワードのあるソフトのフォルダと、 Windowsのフォルダは
共有しないでください。これに対しての最大の防御方法は、コントロールパネルのネット
ワーク TCP/IP -> ダイヤルアップ でマイクロソフト共有サービスをバインドしないこと
です。どうしても共有したいときは、パスワードをつけてください。簡単なものでも無し
よりは効果があります。またパスワードは忘れても簡単に設定し直せるので、複雑で覚え
られないくらいでもかまいません。

どうも、外からアクセスされているなと思うときはネットウォッチャーを起動してくださ
い。windows\netwatch.exeファイル名を指定して実行でnetwatchと入れるだけです。誰か
に入られていたらわかります。（無いときはWindowsのCD-ROMに入っています）


08/09追加

インターネットと直につないでいる LAN上で共有？実は結構います。まさかとは思います
が、インターネット上からIPリーチャブルな環境のマシン(1)で、 TCP/IPで共有なんてし
ていませんよね。 最低でも、ルータで135-139番ポートを塞いでおきましょう。もしくは
Net BEUIで共有しておきましょう。それ以外のプロトコルは外すのが、セキュリティー上
好ましいです。
 
これを実践しない管理者がいて、セキュリティーと便利さがどうのうこうのとか言ったら。
さっさと、その管理者のマシンのデータを全部消して首にしましょう。いくら便利でも、
これは解放しすぎです。

(1)グローバルアドレスの与えられているマシン、もしくは DHCPによってグローバルアド
   レスを使っているマシン
